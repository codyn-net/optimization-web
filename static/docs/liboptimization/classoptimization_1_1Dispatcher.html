<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>liboptimization: optimization::Dispatcher Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceoptimization.html">optimization</a>::<a class="el" href="classoptimization_1_1Dispatcher.html">Dispatcher</a>
  </div>
</div>
<div class="contents">
<h1>optimization::Dispatcher Class Reference</h1><!-- doxytag: class="optimization::Dispatcher" --><!-- doxytag: inherits="optimization::TaskReader" -->
<p>Main dispatcher class.  
<a href="#_details">More...</a></p>
<div class="dynheader">
Inheritance diagram for optimization::Dispatcher:</div>
<div class="dynsection">
 <div class="center">
  <img src="classoptimization_1_1Dispatcher.png" usemap="#optimization::Dispatcher_map" alt=""/>
  <map id="optimization::Dispatcher_map" name="optimization::Dispatcher_map">
<area href="classoptimization_1_1TaskReader.html" alt="optimization::TaskReader" shape="rect" coords="0,0,150,24"/>
</map>
 </div>
</div>

<p><a href="classoptimization_1_1Dispatcher-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoptimization_1_1Dispatcher.html#a18489bf3878d723a5ae4b2c39649f5e9">Run</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classoptimization_1_1Dispatcher.html" title="Main dispatcher class.">Dispatcher</a> main loop.  <a href="#a18489bf3878d723a5ae4b2c39649f5e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoptimization_1_1Dispatcher.html#a63458ac4074261f4b88f7892b07319e4">Stop</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop dispatcher.  <a href="#a63458ac4074261f4b88f7892b07319e4"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoptimization_1_1Dispatcher.html#ad3f0fbe98116b2eaceac8eea3bb7aba7">WriteResponse</a> (<a class="el" href="classoptimization_1_1messages_1_1task_1_1Response.html">messages::task::Response</a> const &amp;response)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write response.  <a href="#ad3f0fbe98116b2eaceac8eea3bb7aba7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoptimization_1_1Dispatcher.html#af1a273c986e9f80a11dd08f3e258a382">RunTask</a> ()=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run the dispatcher task request.  <a href="#af1a273c986e9f80a11dd08f3e258a382"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoptimization_1_1Dispatcher.html#a3a85686df1aa5a56630030822a726d7b">UseMainLoop</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether a main loop should be run (const).  <a href="#a3a85686df1aa5a56630030822a726d7b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Glib::RefPtr&lt; Glib::MainLoop &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoptimization_1_1Dispatcher.html#ac35d08563b59757ee6de216049c6e24a">Main</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The glib main loop.  <a href="#ac35d08563b59757ee6de216049c6e24a"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Main dispatcher class. </p>
<p>The dispatcher class is the main class that drives the dispatcher process. It is mostly a convenience class that does the boring work such as reading the dispatcher task request and writing a response message back to the worker process.</p>
<p>If you want to implement your own dispatcher, you should subclass the <a class="el" href="classoptimization_1_1Dispatcher.html" title="Main dispatcher class.">Dispatcher</a> class. You need to implement at least one method <a class="el" href="classoptimization_1_1Dispatcher.html#af1a273c986e9f80a11dd08f3e258a382" title="Run the dispatcher task request.">RunTask()</a> which job it is to evaluate the parameters supplied to the dispatcher in the task request (Request()).</p>
<p>There are two main modes of operation. If you can evaluate the solution synchronously, you can simply implement <a class="el" href="classoptimization_1_1Dispatcher.html#af1a273c986e9f80a11dd08f3e258a382" title="Run the dispatcher task request.">RunTask()</a> and call <a class="el" href="classoptimization_1_1Dispatcher.html#ad3f0fbe98116b2eaceac8eea3bb7aba7" title="Write response.">WriteResponse()</a> with a response message. In this case you would override <a class="el" href="classoptimization_1_1Dispatcher.html#a3a85686df1aa5a56630030822a726d7b" title="Whether a main loop should be run (const).">UseMainLoop()</a> to return FALSE.</p>
<p>The second mode of operation is to use a glib main loop to handle some IO asynchronously (you can use this for instance if you want to launch another process that should handle the request, like the webots dispatcher). In this case, you implement <a class="el" href="classoptimization_1_1Dispatcher.html#af1a273c986e9f80a11dd08f3e258a382" title="Run the dispatcher task request.">RunTask()</a> to start some asynchronous process using the main loop. A main loop will be created by default. If you at some point get some result, you call <a class="el" href="classoptimization_1_1Dispatcher.html#ad3f0fbe98116b2eaceac8eea3bb7aba7" title="Write response.">WriteResponse()</a> and quit the main loop. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac35d08563b59757ee6de216049c6e24a"></a><!-- doxytag: member="optimization::Dispatcher::Main" ref="ac35d08563b59757ee6de216049c6e24a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Glib::RefPtr&lt; Glib::MainLoop &gt; Dispatcher::Main </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The glib main loop. </p>
<p>Get the glib main loop for this dispatcher. The main loop will only be created if UseMainLoop returns TRUE.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the glib main loop </dd></dl>

</div>
</div>
<a class="anchor" id="a18489bf3878d723a5ae4b2c39649f5e9"></a><!-- doxytag: member="optimization::Dispatcher::Run" ref="a18489bf3878d723a5ae4b2c39649f5e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Dispatcher::Run </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classoptimization_1_1Dispatcher.html" title="Main dispatcher class.">Dispatcher</a> main loop. </p>
<p>The dispatcher main loop. A dispatcher executable should instantiate a dispatcher object and call this function. It will first read the task request from STDIN. Then it calls RunTask and if needed will start a glib main loop (this can be used for asynchronous dispatching).</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the dispatch was successfull, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="af1a273c986e9f80a11dd08f3e258a382"></a><!-- doxytag: member="optimization::Dispatcher::RunTask" ref="af1a273c986e9f80a11dd08f3e258a382" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Dispatcher::RunTask </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Run the dispatcher task request. </p>
<p>Main function that evaluates the dispatcher task request. Subclasses are required to implement this function. They should either call <a class="el" href="classoptimization_1_1Dispatcher.html#ad3f0fbe98116b2eaceac8eea3bb7aba7" title="Write response.">WriteResponse()</a> with the response (and override <a class="el" href="classoptimization_1_1Dispatcher.html#a3a85686df1aa5a56630030822a726d7b" title="Whether a main loop should be run (const).">UseMainLoop()</a> to return false), or setup some asynchronous action and use the main loop (<a class="el" href="classoptimization_1_1Dispatcher.html#a3a85686df1aa5a56630030822a726d7b" title="Whether a main loop should be run (const).">UseMainLoop()</a>) to write a response at a later time.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>false if the request was invalid, true otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a63458ac4074261f4b88f7892b07319e4"></a><!-- doxytag: member="optimization::Dispatcher::Stop" ref="a63458ac4074261f4b88f7892b07319e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dispatcher::Stop </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop dispatcher. </p>
<p>Stop the dispatcher. The default implementation will quit the main loop if one is used. You can override this in your dispatcher if you need to clean up something for example. </p>

</div>
</div>
<a class="anchor" id="a3a85686df1aa5a56630030822a726d7b"></a><!-- doxytag: member="optimization::Dispatcher::UseMainLoop" ref="a3a85686df1aa5a56630030822a726d7b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Dispatcher::UseMainLoop </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Whether a main loop should be run (const). </p>
<p>Get whether a main loop should be run after RunTask is called. Subclasses can override this if they do not need a main loop. The default is TRUE.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the dispatcher needs a main loop, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ad3f0fbe98116b2eaceac8eea3bb7aba7"></a><!-- doxytag: member="optimization::Dispatcher::WriteResponse" ref="ad3f0fbe98116b2eaceac8eea3bb7aba7" args="(messages::task::Response const &amp;response)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Dispatcher::WriteResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoptimization_1_1messages_1_1task_1_1Response.html">messages::task::Response</a> const &amp;&nbsp;</td>
          <td class="paramname"> <em>response</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write response. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>response</em>&nbsp;</td><td>the response to write</td></tr>
  </table>
  </dd>
</dl>
<p>Write a response back to the worker process.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the response was written, false otherwise </dd></dl>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Tue Dec 7 09:28:38 2010 for liboptimization by&nbsp;<a href="http://www.doxygen.org/index.html">Doxygen</a> 1.6.3</small></address>
</body>
</html>
